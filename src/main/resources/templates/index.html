<!DOCTYPE html>
<html
        xmlns:th="http://www.thymeleaf.org"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        layout:decorate="~{layouts/portal}">
<head>
    <title>Portal</title>
</head>
<body>
<div layout:fragment="content">

    <div class="header-container">
        <div class="header-item">

        </div>
        <div class="header-item">
            <div class="top-buttons">
                <a class="btn-text" th:href="@{/catalog}">
                    <svg aria-hidden="true" focusable="false" role="img" xmlns="http://www.w3.org/2000/svg"
                         viewBox="0 0 448 512">
                        <path fill="currentColor"
                              d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path>
                    </svg>
                    <th:block th:text="#{masterTile.topButtons.create}">New</th:block>
                </a>
                <form th:action="@{/userTile/provisioning}" method="post">
                    <button class="btn-text" type="submit">
                        <svg aria-hidden="true" focusable="false" role="img" xmlns="http://www.w3.org/2000/svg"
                             viewBox="0 0 512 512">
                            <path fill="currentColor"
                                  d="M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"></path>
                        </svg>
                        <th:block th:text="#{masterTile.topButtons.provisioning}">Provisioning</th:block>
                    </button>
                </form>
                <a class="btn-text" id="toggleTileEditor">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 23.31 23.943">
                        <path d="M12.409,3l-.144.748-.547,2.734A9.153,9.153,0,0,0,9.33,7.892L6.653,6.971l-.719-.23L5.56,7.4,3.718,10.569l-.374.662.547.489,2.072,1.813a8.989,8.989,0,0,0-.173,1.439,8.989,8.989,0,0,0,.173,1.439L3.891,18.223l-.547.489.374.662L5.56,22.54l.374.662.719-.23,2.676-.921a9.153,9.153,0,0,0,2.389,1.41l.547,2.734.144.748h5.18l.144-.748.547-2.734a9.153,9.153,0,0,0,2.389-1.41l2.676.921.719.23.374-.662,1.842-3.166.374-.662-.547-.489L24.035,16.41a8.989,8.989,0,0,0,.173-1.439,8.989,8.989,0,0,0-.173-1.439l2.072-1.813.547-.489-.374-.662L24.438,7.4l-.374-.662-.719.23-2.676.921a9.153,9.153,0,0,0-2.389-1.41l-.547-2.734L17.589,3Zm1.5,1.842h2.187l.46,2.389.115.547.518.173a7.382,7.382,0,0,1,2.791,1.612l.4.374.518-.173,2.331-.806,1.094,1.871-1.842,1.64-.432.345.144.547a7.607,7.607,0,0,1,0,3.223l-.115.547.4.345,1.842,1.64-1.094,1.871L20.9,20.18l-.518-.173-.4.374a7.382,7.382,0,0,1-2.791,1.612l-.518.173-.115.547-.46,2.389H13.905l-.46-2.389-.115-.547-.518-.173a7.382,7.382,0,0,1-2.791-1.612l-.4-.374L9.1,20.18l-2.331.806L5.675,19.116l1.842-1.64.432-.345L7.8,16.583a7.607,7.607,0,0,1,0-3.223l.144-.547-.432-.345-1.842-1.64L6.768,8.957,9.1,9.763l.518.173.4-.374A7.382,7.382,0,0,1,12.812,7.95l.518-.173.115-.547ZM15,10.367a4.6,4.6,0,1,0,4.6,4.6A4.618,4.618,0,0,0,15,10.367Zm0,1.842a2.763,2.763,0,1,1-2.763,2.763A2.75,2.75,0,0,1,15,12.209Z"
                              transform="translate(-3.344 -3)" fill="currentColor"></path>
                    </svg>
                    <th:block th:text="#{masterTile.topButtons.edit}">Kacheln bearbeiten</th:block>
                </a>
            </div>
        </div>
    </div>

    <div class="tiles tiles-draggable tiles-not-editable col-block col-3 flex-align-start"
         th:attr="data-sort-url=@{/userTile/updateSort}">
        <div class="grid-sizer no-sort"></div>
        <div class="gutter-sizer no-sort"></div>

        <div class="tile col" th:each="tile : ${tiles}"
             th:classappend="${tile.backgroundColor != T(ch.itds.pbs.portal.domain.Color).DEFAULT ? 'theme-' + tile.backgroundColor: ''}"
             th:attr="data-id=${tile.userTileId},data-position=${tile.position}"
        >
            <a th:if="${tile.hasUrl}" target="_blank" rel="noopener" th:href="${tile.url}">
                <div class="content-wrap">
                    <div class="title" th:text="${tile.title}"></div>
                    <div class="content" th:text="${tile.content}"></div>
                    <div class="image" th:if="${tile.image}">
                        <img th:src="@{/tile/masterFile/{tileId}/{tileVersion}/{name}(tileId=${tile.masterTileId},tileVersion=${tile.masterTileVersion},name=${tile.image.name})}">
                    </div>

                    <div class="btn-icon btn-link">
                        <svg aria-hidden="true" focusable="false" role="img" xmlns="http://www.w3.org/2000/svg"
                             viewBox="0 0 576 512">
                            <path fill="currentColor"
                                  d="M195.515 374.828c-4.686-4.686-4.686-12.284 0-16.971l323.15-323.15-.707-.707-89.958.342c-6.627 0-12-5.373-12-12v-9.999c0-6.628 5.372-12 12-12L564 0c6.627 0 12 5.372 12 12l-.343 136c0 6.627-5.373 12-12 12h-9.999c-6.627 0-12-5.373-12-12L542 58.042l-.707-.707-323.15 323.15c-4.686 4.686-12.284 4.686-16.971 0l-5.657-5.657zm232-155.633l-8 8A12 12 0 0 0 416 235.68V464c0 8.837-7.164 16-16 16H48c-8.836 0-16-7.163-16-16V112c0-8.837 7.164-16 16-16h339.976c3.183 0 6.235-1.264 8.485-3.515l8-8c7.56-7.56 2.206-20.485-8.485-20.485H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V227.681c0-10.691-12.926-16.045-20.485-8.486z"></path>
                        </svg>
                    </div>
                </div>
            </a>

            <div th:unless="${tile.hasUrl}" class="content-wrap">
                <div class="title" th:text="${tile.title}"></div>
                <div class="content" th:text="${tile.content}"></div>
                <div class="image" th:if="${tile.image}">
                    <img th:src="@{/tile/masterFile/{tileId}/{tileVersion}/{name}(tileId=${tile.masterTileId},tileVersion=${tile.masterTileVersion},name=${tile.image.name})}">
                </div>
            </div>

            <div class="meta-wrap">
                <div class="label-wrap">
                    <div class="category label" th:text="${tile.category}"></div>
                </div>
                <div class="meta-inner-wrap">
                    <a th:href="@{/message(tileId=${tile.masterTileId})}" class="message-count badge"
                       th:if="${tile.unreadMessageCount>0}"
                       th:text="${tile.unreadMessageCount}"
                       th:title="#{message.unread.link.title(${tile.title})}"
                    >445454</a>
                    <div class="btn-icon btn-move editable-only">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                            <path fill="currentColor"
                                  d="M512 256c0 6.797-2.891 13.28-7.938 17.84l-80 72C419.6 349.9 413.8 352 408 352c-3.312 0-6.625-.6875-9.766-2.078C389.6 346.1 384 337.5 384 328v-48h-104V384l47.1 .0026c9.484 0 18.06 5.578 21.92 14.23s2.25 18.78-4.078 25.83l-72 80C269.3 509.1 262.8 512 255.1 512s-13.28-2.89-17.84-7.937l-71.1-80c-6.328-7.047-7.938-17.17-4.078-25.83s12.44-14.23 21.92-14.23L232 384V280H128v48c0 9.484-5.578 18.06-14.23 21.92C110.6 351.3 107.3 352 104 352c-5.812 0-11.56-2.109-16.06-6.156l-80-72C2.891 269.3 0 262.8 0 256s2.891-13.28 7.938-17.84l80-72C95 159.8 105.1 158.3 113.8 162.1C122.4 165.9 128 174.5 128 184v48h104V128L183.1 128c-9.484 0-18.06-5.578-21.92-14.23S159.8 94.99 166.2 87.94l71.1-80c9.125-10.09 26.56-10.09 35.69 0l72 80c6.328 7.047 7.938 17.17 4.078 25.83s-12.44 14.23-21.92 14.23L280 128v104H384v-48c0-9.484 5.578-18.06 14.23-21.92c8.656-3.812 18.77-2.266 25.83 4.078l80 72C509.1 242.7 512 249.2 512 256z"/>
                        </svg>
                    </div>
                    <form th:action="@{/userTile/delete/{id}(id=${tile.userTileId})}" method="post"
                          onsubmit="return confirm('Wirklich lÃ¶schen?');">
                        <button class="btn-icon btn-delete editable-only" th:title="#{general.delete}" type="submit"
                                th:attr="aria-label=#{general.delete}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18.669" height="20.366"
                                 viewBox="0 0 18.669 20.366">
                                <path d="M12.637,4a1.634,1.634,0,0,0-1.7,1.7v.849H5v1.7h.928L7.546,23.6l.08.769H21.043l.08-.769L22.741,8.243h.928v-1.7h-5.94V5.7a1.727,1.727,0,0,0-.477-1.22A1.727,1.727,0,0,0,16.031,4Zm0,1.7h3.394v.849H12.637ZM7.652,8.243H21.017L19.505,22.669H9.163Zm3.288,2.546v9.334h1.7V10.789Zm2.546,0v9.334h1.7V10.789Zm2.546,0v9.334h1.7V10.789Z"
                                      transform="translate(-5 -4)" fill="currentColor"/>
                            </svg>
                        </button>
                    </form>
                </div>
            </div>

        </div>
    </div>
</div>

<th:block layout:fragment="scripts">

</th:block>

</body>
</html>
